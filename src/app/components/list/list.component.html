<ng-container *ngIf="currentUser$ | async as currentUser">
  <div>
    <mat-list>
      <h3 mat-subheader><span [matBadge]="tickets?.length" matBadgeOverlap="false">List of stories</span></h3>
      <mat-list-item *ngIf="currentUser.isAdmin">
        <label class="add-ticket">
          <input class="ticket-input" type="text" [(ngModel)]="ticket">
          <button class="ticket-btn" mat-raised-button (click)="onAddTicket()" [disabled]="!ticket.length">Add ticket</button>
          <button class="ticket-btn" mat-raised-button (click)="addTicketsFromText()">Add tickets from text</button>
        </label>
      </mat-list-item>

      <ng-container *ngIf="tickets?.length">
        <mat-list-item *ngFor="let ticket of tickets" class="list" [class.test]="ticket.ticketId === session.activeTicket">
          <mat-icon mat-list-icon>description</mat-icon>
          <h4 mat-line>{{ ticket.title }}</h4>
          <button mat-icon-button (click)="onDeleteTicket(ticket)">
            <mat-icon>delete_forever</mat-icon>
          </button>
        </mat-list-item>
      </ng-container>

    </mat-list>

  </div>
</ng-container>
